(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SolutionManage"],{"0815":function(t,e,o){},"10c1":function(t,e,o){"use strict";o("981d")},5156:function(t,e,o){"use strict";o("9853")},"981d":function(t,e,o){},9853:function(t,e,o){},c2b1:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"business-content-container"},[o("div",{staticClass:"business-content-inner"},[o("div",{staticClass:"search-row l-flex-row-start"},[o("el-input",{staticClass:"l-search-input",attrs:{placeholder:"请输入问答文章标题"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),o("el-button",{attrs:{type:"primary",icon:"el-icon-search"}},[t._v("搜索")]),o("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(e){t.dialogShow=!0}}},[t._v("添加")])],1),o("div",{staticClass:"l-table-content"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,height:"100%",border:""}},[o("el-table-column",{attrs:{prop:"id",label:"ID",width:"96",align:"center"}}),o("el-table-column",{attrs:{label:"文章分类",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?o("p",{staticStyle:{color:"#333"}},[t._v(" #论文查重技巧# ")]):t._e(),2==e.row.type?o("p",{staticStyle:{color:"#333"}},[t._v(" #论文常见问题# ")]):t._e(),3==e.row.type?o("p",{staticStyle:{color:"#333"}},[t._v(" #论文行业资讯# ")]):t._e(),4==e.row.type?o("p",{staticStyle:{color:"#333"}},[t._v(" #论文知识普及# ")]):t._e()]}}])}),o("el-table-column",{attrs:{label:"文章封面",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("el-image",{staticClass:"user-table-logo-img",attrs:{src:t.row.cover_photo?t.row.cover_photo:"https://","preview-src-list":t.row.cover_photo?[t.row.cover_photo]:[]}})]}}])}),o("el-table-column",{attrs:{prop:"title",label:"文章标题",align:"center"}}),o("el-table-column",{attrs:{label:"最近编辑人",width:"96",align:"center"}},[t._v(" admin ")]),o("el-table-column",{attrs:{label:"创建时间",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("p",[t._v(t._s(e.row.create_time))])]}}])}),o("el-table-column",{attrs:{label:"状态",width:"96",align:"center"}},[t._v(" 启用 ")]),o("el-table-column",{attrs:{prop:"name",label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),t.showPreviewDialog(e.row)}}},[t._v(" 预览 ")]),o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),t.showDetailsDialog(e.$index)}}},[t._v(" 编辑 ")]),o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),t.deleteArticle(e.row)}}},[t._v(" 删除 ")])]}}])})],1)],1),o("div",{staticClass:"l-page-jumper l-flex-row-start"},[o("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"hide-on-single-page":!1,"current-page":t.page},on:{"current-change":t.currentPageChange}})],1)]),t.refreshKit?o("el-dialog",{attrs:{title:"添加文章",top:"8vh",visible:t.dialogShow,width:t.isPc?"78%":"96%","append-to-body":!0,"destroy-on-close":"",close:t.onDialogClose},on:{"update:visible":function(e){t.dialogShow=e}}},[t.refreshKit?o("add-solution-dialog",{attrs:{closeDialog:t.closeDialog},on:{finish:t.onAddFinish}}):t._e()],1):t._e(),t.refreshKit?o("el-dialog",{attrs:{title:"预览文章",top:"8vh",visible:t.preViewDialogShow,width:t.isPc?"60%":"96%","append-to-body":!0,"destroy-on-close":""},on:{"update:visible":function(e){t.preViewDialogShow=e}}},[t.refreshKit?o("preview-solution",{ref:"previewSolutionRef",attrs:{closeDialog:t.closePreViewDialog}}):t._e()],1):t._e()],1)},l=[],a=o("365c"),n=o("c698"),s=o("4260"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"l-dialog-content"},[o("div",{staticClass:"l-dialog-row l-flex-row-start"},[o("div",{staticClass:"l-dialog-half-row l-flex-row-start"},[o("p",{staticClass:"min-width-text5"},[t._v("文章标题")]),o("el-input",{staticClass:"l-dialog-input",attrs:{placeholder:"请输入文章标题",clearable:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),o("div",{staticClass:"l-dialog-half-row l-flex-row-start"},[o("p",[t._v("所属分类")]),o("el-select",{attrs:{placeholder:"请选择渠道类型"},model:{value:t.solutionType,callback:function(e){t.solutionType=e},expression:"solutionType"}},t._l(t.solutionTypes,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),o("div",{staticClass:"l-dialog-row l-flex-row-start height-auto"},[o("div",{staticClass:"l-dialog-half-row l-flex-row-start height-auto"},[o("p",{staticClass:"min-width-text5"},[t._v("文章封面")]),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:t.uploaderFileUrl,"on-success":t.onUploaderSuccess,"on-error":t.onError,"on-progress":t.onProgress,"on-change":t.onFilePickerChange,"show-file-list":!1,data:t.uploaderFileExtraParams}},[t.imageUrl.length?t._e():o("i",{staticClass:"el-icon-upload",staticStyle:{"font-size":"32px"}}),t.imageUrl.length?o("img",{staticClass:"after-uploader-img",attrs:{src:t.imageUrl}}):o("div",{staticClass:"el-upload__text"},[t._v(" 将图片拖到此处，或"),o("em",[t._v("点击上传")])])])],1)]),o("div",{staticClass:"edit-content"},[o("editor",{attrs:{setting:{min_height:500,max_height:500}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),o("div",{staticClass:"l-dialog-option-footer"},[o("el-button",{on:{click:t.cancelDialog}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary",loading:t.addLoading},on:{click:t.confirmAdd}},[t._v("确 认")])],1)])},c=[],u=o("4360"),d={name:"AddJoinWayDialog",props:{closeDialog:{type:Function,default:null}},data:function(){return{imageUrl:"",uploaderFileExtraParams:{token:u["a"].state.user.token},uploaderFileUrl:"http://101.132.133.126:8091"+n["l"],title:"",content:"",solutionType:"",solutionTypes:[{value:"1",label:"论文查重技巧"},{value:"2",label:"论文常见问题"},{value:"3",label:"论文行业资讯"},{value:"4",label:"论文知识普及"}],addLoading:!1}},methods:{cancelDialog:function(){this.closeDialog()},confirmAdd:function(){var t=this;if(Object(s["h"])(this.title))return this.$message.error("请输入标题");if(Object(s["h"])(this.solutionType))return this.$message.error("请选择文章类型");if(Object(s["h"])(this.imageUrl))return this.$message.error("请选择文章封面");if(Object(s["h"])(this.content))return this.$message.error("请输入内容");this.addLoading=!0,console.log(this.content);var e={title:this.title,desc:this.content,type:this.solutionType,cover_photo:this.imageUrl};a["a"].post(n["c"],e).then((function(e){console.log(e),200==e.code&&(t.$emit("finish"),t.addLoading=!1,t.cancelDialog())})).catch((function(e){t.addLoading=!1,console.log(e)}))},onUploaderSuccess:function(t){200===t.code?(this.imageUrl=t.data.list[0].url,this.$message.success("图片上传成功！")):this.$message.error(t.msg)},onError:function(t){console.log("文件上传失败"),this.$message.error("文件上传失败")},onProgress:function(t){},onFilePickerChange:function(t){}}},g=d,h=(o("5156"),o("2877")),p=Object(h["a"])(g,r,c,!1,null,"fc7a4360",null),f=p.exports,v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"business-content-container pre-view-article-container"},[o("div",{staticClass:"pre-view-article",domProps:{innerHTML:t._s(t.content)}})])},w=[],m={name:"PreViewSolution",data:function(){return{content:""}},methods:{setContent:function(t){this.content=t}}},b=m,_=(o("10c1"),Object(h["a"])(b,v,w,!1,null,"6c44e7be",null)),y=_.exports,C={name:"SolutionManage",components:{"add-solution-dialog":f,"preview-solution":y},data:function(){return{isPc:Object(s["i"])(),userName:"",dialogShow:!1,preViewDialogShow:!1,refreshKit:!0,total:0,list:[],page:1,loading:!0}},watch:{dialogShow:function(t,e){var o=this;t||(this.refreshKit=!1,this.$nextTick((function(){o.refreshKit=!0})))},preViewDialogShow:function(t,e){var o=this;t||(this.refreshKit=!1,this.$nextTick((function(){o.refreshKit=!0})))}},created:function(){this.getListByPage(1)},methods:{currentPageChange:function(t){console.log(t),this.page,this.getListByPage(t)},onAddFinish:function(){this.getListByPage(this.page)},getListByPage:function(t){var e=this;this.loading=!0,a["a"].get(n["N"],{params:{page:t}}).then((function(t){console.log(t),e.loading=!1,e.total=t.data.count,e.list=t.data.list})).catch((function(t){e.loading=!1,console.log(t)}))},showPreviewDialog:function(t,e){var o=this;console.log(t),this.preViewDialogShow=!0,this.$nextTick((function(){o.$refs.previewSolutionRef.setContent(t.desc)}))},showDetailsDialog:function(){},deleteArticle:function(t){var e=this;this.$confirm("此操作将永久删除此项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var o={id:t.id};a["a"].post(n["p"],o).then((function(t){200==t.code?e.$message({type:"success",message:"删除成功!"}):e.$message({type:"error",message:t.msg})})).catch((function(t){}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},closeDialog:function(){this.dialogShow=!1,this.onDialogClose()},closePreViewDialog:function(t,e){this.preViewDialogShow=!1},onDialogClose:function(){}}},x=C,D=(o("c62c"),Object(h["a"])(x,i,l,!1,null,"63bd0fb3",null));e["default"]=D.exports},c62c:function(t,e,o){"use strict";o("0815")}}]);